# Chapter3 정리
## 액션, 계산, 데이터
- 액션: 실행 시점과 횟수에 의존
    - => **순수하지 않은 함수(impure function)**
- 계산: 같은 입력이 들어오면 같은 출력을 보장하는 것
    - => **순수 함수(pure function)**
- 데이터: 이벤트에 대한 **사실**(실제 [사전](https://english.dict.naver.com/english-dictionary/#/entry/enen/fdbfc2a9bfc4491d82324d810d9b43f9)에도 있음)

## 실제 예제에 액션, 계산, 데이터 적용해보기
쿠폰독은 구독자들에게 쿠폰 이메일을 매주 보내주는 서비스, 새로운 마케팅으로 10명이상 추천한 유저에게 더 좋은 쿠폰 제공하려고 함. 이에 맞는 프로그래밍 개발 필요.
- 요구사항
    - 이벤트 테이블(DB)
    - 쿠폰 테이블(DB)
    - 쿠폰은 bad, good, best 쿠폰 등급 존재
    - 친구 10명 이상 추천시 모든 best 쿠폰 제공<br>
    나머지 유저는 모든 good 쿠폰 제공<br>
    bad 쿠폰은 실제 사용되지 않음
- 액션, 계산, 데이터 분류하기
    - 구독자 테이블에서 데이터 가져오기(액션)
        - 구독자 정보(데이터)
    - 쿠폰 테이블에서 데이터 가져오기(액션)
        - 쿠폰 정보(데이터)
    - 쿠폰 결정하기(액션)
        - 각 구독자 별 보내줘야할 쿠폰 랭크 결정(계산)
        - 구독자별 랭크에 맞는 쿠폰 결정하기(계산)
    - 유저별 이메일 전송하기(액션)
        - 전송할 이메일 내용 만들기(계산)
- 플로우
    1. 구독자 데이터 가져오기(액션)
        - 반환값: 구독자 데이터(데이터)
        ``` json
        [
            {
                "email": "sam@pmail.com",
                "rec_count": 16
            },
            ...
        ]
        ```
    2. 쿠폰 데이터 가져오기(액션)
        - 반환값: 쿠폰 데이터(데이터)
        ``` json
        [
            {
                "code": "10PERCENT",
                "rank": "bad"
            },
            ...
        ]
        ```
    3. 쿠폰 데이터에서 good 쿠폰 목록, best 쿠폰 목록 계산하기(계산)
        - 입력값: 쿠폰 데이터, rank
        - 반환값: rank에 해당하는 쿠폰 목록 리스트
    4. 이메일 데이터 계산하기(계산)
        - 입력값: 구독자 데이터, good 쿠폰 목록, best 쿠폰 목록
        - 반환값: 이메일 데이터 리스트
        ``` json
        [
            {
                "from": "nesletter@coupondog.co",
                "to": subscriber.email,
                "subject": "Your {coupon.rank} weekly coupons inside",
                "body": ~
            }
        ]
        ```
    5. 이메일 보내기
        - 입력값: 이메일 데이터 리스트

## (추론) 순수 함수를 만들어야 하는 이유
- 테스트하기 쉽다.
- 조합하기 쉽다.
- 분석이 쉽다.
- 그래서 액션을 최대한 계산으로 분리하는 것이 좋음

=> 이것이 바로 함수형 프로그래밍을 해야 하는 이유로 보인다. 순수함수가 많을수록 프로그램이 위의 장점을 가질 수 있기 때문이다.

## 액션을 가지는 함수는 액션 함수이다.
``` js
function wrapper(){
    ...
    sendEmail(...); // 액션(비순수 함수)
}
```
`sendEmail`이 액션이므로, `wrapper`도 액션이다. js에서의 `async`, `await`, `any`와 같이 상위 함수로 퍼지는 성질이 있다.